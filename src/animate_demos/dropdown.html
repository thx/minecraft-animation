<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>dropmenu</title>
  <script src="https://g.alicdn.com/thx/brix-release/1.0.0-beta.1/require-config-css-debug.js"></script>
  <link href="../../dist/css/base.css" rel="stylesheet">
  <link href="../../dist/css/animate.css" rel="stylesheet">
</head>
<body>
<div class="desc">
  <div class="animate-class">
    <h5><strong>动画样式名</strong></h5>
    <ul>
      <li>渐显下拉：<code>.bx-anim-fade-in-down</code></li>
      <li>渐隐上拉：<code>.bx-anim-fade-out-up</code></li>
    </ul>

    <h5><strong>注意事项</strong></h5>
    <ul>
      <li>key-frame动画不支持设置<code>display:none</code>, 需要<code>on('animationend')</code>时将相关元素隐藏</li>
    </ul>
  </div>
</div>

<div class="animate-content clearfix">
  <div class="dropmenu-wrap">
    <input type="text" bx-animation="
      on: click;
      call: resetClass;
      call: showDropMenu;
    " placeholder="click here" class="form-control" style="width:200px;">
    <ul class="dropmenu" bx-animation="
      when: resetClass;
      removeClass: bx-anim-fade-out-up,3;
      when: showDropMenu;
      style: display block,3;
      class: bx-anim-fade-in-down;
      on: click;
      class: bx-anim-fade-out-up,2;
      style: display none,3;
    " style="display:none;">
      <li>第一个选项</li>
      <li>第二个选项</li>
      <li>第三个选项</li>
      <li>第四个选项</li>
    </ul>
  </div>
</div>

  <div class="desc">
    <div class="animate-class">
      <h5>源码：</h5>
    </div>
    <xmp>
      <div class="dropmenu-wrap">
        <input type="text" bx-animation="
          on: click;
          call: resetClass;
          call: showDropMenu;
        " placeholder="click here" class="form-control" style="width:200px;">
        <ul class="dropmenu" bx-animation="
          when: resetClass;
          removeClass: bx-anim-fade-out-up,3;
          when: showDropMenu;
          style: display block,3;
          class: bx-anim-fade-in-down;
          on: click;
          class: bx-anim-fade-out-up,2;
          style: display none,3;
        " style="display:none;">
          <li>第一个选项</li>
          <li>第二个选项</li>
          <li>第三个选项</li>
          <li>第四个选项</li>
        </ul>
      </div>
    </xmp>
  </div>

<script>
  require.config({
    paths: {
      'brix/animation': 'http://g.alicdn.com/thx/brix-animation/20170316.185044.408/animation-debug'
    }
  })
  // http://g.alicdn.com/thx/brix-animation/20170315.151921.087/animation-debug

  require([
    'jquery',
    'brix/animation'
  ], function($, Anim) {
    var anim = new Anim({
      el: $('body')
    })

    // $('.form-control').on('click', function(e) {
    //   //
    //   $(e.target).next()
    //   .show()
    //   .removeClass('bx-anim-fade-out-up')
    //   .removeClass('endhide')
    //   .addClass('bx-anim-fade-in-down')
    // })

    // //
    // $('body').on('animationend', '.endhide', function(e) {
    //   $(e.currentTarget).hide()
    //   $(e.currentTarget).removeClass('endhide')
    // })

    // //
    // $(document).on('click', function(e) {
    //   if (!$(e.target).closest('.dropmenu-wrap').length) {
    //     $('.dropmenu')
    //     .removeClass('bx-anim-fade-in-down')
    //     .addClass('bx-anim-fade-out-up endhide')
    //   }
    // })
  })
</script>
</body>
</html>